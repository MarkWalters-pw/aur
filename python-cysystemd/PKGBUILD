# PKGBUILD generated by pipman
# Python package author: Dmitry Orlov <me@mosquito.su> <me@mosquito.su>
pkgname=python-cysystemd
_reponame=cysystemd
pkgver=1.6.2
pkgrel=1
pkgdesc="SystemD wrapper on Cython"
arch=(any)
url="http://github.com/mosquito/cysystemd"
license=(Apache)
depends=("cython")
makedepends=("python" "python-pip")

# build() {
#   pip install --no-deps --target="cysystemd" cysystemd==$pkgver
# }
# package() {
#   mkdir -p $pkgdir/usr/lib/python3.7/site-packages/
#   cp -r $srcdir/cysystemd/* $pkgdir/usr/lib/python3.7/site-packages/
# }
source=("https://pypi.org/packages/source/${_reponame::1}/${_reponame}/${_reponame}-${pkgver}.tar.gz")

sha256sums=('6097e2d1ecbc7f21a90552e8432ed7bb5dfea06ff7a04f1001e949f8ff4756da')

build() {
	cd "${srcdir}/${_reponame}-${pkgver}"
	python -m build --wheel --no-isolation
}

package() {
	cd "${srcdir}/${_reponame}-${pkgver}"

	python -m installer --destdir="${pkgdir}" dist/*.whl

	install -d "${pkgdir}/usr/share/licenses/${pkgname}/"
	cp ./LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/"

}
